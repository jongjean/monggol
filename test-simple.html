<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ëª½ê³¨ ê°¤ëŸ¬ë¦¬ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { margin: 0; font-family: Arial; }
        #loading { 
            position: fixed; 
            width: 100%; 
            height: 100vh; 
            background: #000; 
            color: #fff; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
        }
        #opening { 
            position: fixed; 
            width: 100%; 
            height: 100vh; 
            background: linear-gradient(to bottom, #1a1a2e, #16213e); 
            color: #fff; 
            display: none;
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
        }
        #exhibition { 
            position: fixed; 
            width: 100%; 
            height: 100vh; 
            display: none; 
        }
        button { 
            padding: 15px 30px; 
            font-size: 18px; 
            background: #ffd700; 
            border: none; 
            cursor: pointer; 
            border-radius: 5px;
            margin-top: 20px;
        }
        button:hover { background: #ffed4e; }
    </style>
</head>
<body>
    <div id="loading">
        <h1>ëì—†ëŠ” ì§€í‰ì„  ë„ˆë¨¸</h1>
        <p>ë¡œë”© ì¤‘...</p>
    </div>

    <div id="opening">
        <h1 style="font-size: 48px; margin-bottom: 10px;">ëì—†ëŠ” ì§€í‰ì„  ë„ˆë¨¸</h1>
        <h2 style="font-size: 24px; color: #aaa;">Beyond the Endless Horizon</h2>
        <p style="margin: 20px 0;">ëª½ê³¨ ëŒ€ìì—° ì‚¬ì§„ì „</p>
        <button id="enter-btn">ì „ì‹œê´€ ì…ì¥</button>
    </div>

    <div id="exhibition"></div>

    <script src="/js/three.min.js"></script>
    <script>
        console.log('ğŸš€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì‹œì‘');
        
        setTimeout(() => {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('opening').style.display = 'flex';
            console.log('âœ… ì˜¤í”„ë‹ í™”ë©´ í‘œì‹œ');
        }, 1000);
        
        document.getElementById('enter-btn').addEventListener('click', () => {
            console.log('ğŸ¯ ì „ì‹œê´€ ì…ì¥ ë²„íŠ¼ í´ë¦­');
            document.getElementById('opening').style.display = 'none';
            document.getElementById('exhibition').style.display = 'block';
            setTimeout(initThreeJS, 100);
        });
        
        function initThreeJS() {
            console.log('ğŸš€ Three.js ì´ˆê¸°í™” ì‹œì‘');
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x87CEEB);
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 1.6, 5);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('exhibition').appendChild(renderer.domElement);
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.9);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
            directionalLight.position.set(5, 10, 7);
            scene.add(directionalLight);
            const groundGeometry = new THREE.PlaneGeometry(50, 50);
            const groundMaterial = new THREE.MeshStandardMaterial({ color: 0xD2B48C });
            const ground = new THREE.Mesh(groundGeometry, groundMaterial);
            ground.rotation.x = -Math.PI / 2;
            scene.add(ground);
            console.log('ğŸ“¦ 15ê°œ ì•¡ì ìƒì„±');
            const textureLoader = new THREE.TextureLoader();
            const artworkMeshes = [];
            const radius = 8;
            const angleStep = (Math.PI * 1.5) / 14;
            for (let i = 0; i < 15; i++) {
                const angle = -Math.PI * 0.75 + angleStep * i;
                const x = Math.sin(angle) * radius;
                const z = Math.cos(angle) * radius;
                const frameGroup = new THREE.Group();
                const frameGeometry = new THREE.BoxGeometry(2.2, 1.5, 0.1);
                const frameMaterial = new THREE.MeshStandardMaterial({ color: 0xFFD700, metalness: 0.6, roughness: 0.4 });
                const frame = new THREE.Mesh(frameGeometry, frameMaterial);
                frameGroup.add(frame);
                const imgGeometry = new THREE.PlaneGeometry(2, 1.3);
                const imgMaterial = new THREE.MeshBasicMaterial({ color: 0x888888 });
                const imgMesh = new THREE.Mesh(imgGeometry, imgMaterial);
                imgMesh.position.z = 0.06;
                const imgNum = String(i + 1).padStart(2, '0');
                const imagePath = '/images/artworks/artwork_' + imgNum + '.jpg';
                textureLoader.load(imagePath, function(texture) {
                    imgMesh.material.map = texture;
                    imgMesh.material.color.set(0xFFFFFF);
                    imgMesh.material.needsUpdate = true;
                    console.log('âœ… [' + (i+1) + '/15] ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ');
                }, undefined, function() {
                    console.error('âŒ [' + (i+1) + '/15] ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨');
                    imgMesh.material.color.set(0xFF0000);
                });
                imgMesh.userData = { artworkId: i + 1 };
                frameGroup.add(imgMesh);
                frameGroup.position.set(x, 1.6, z);
                frameGroup.lookAt(0, 1.6, 0);
                scene.add(frameGroup);
                artworkMeshes.push(imgMesh);
            }
            let isDragging = false;
            let previousMouseX = 0;
            let cameraRotationY = 0;
            renderer.domElement.addEventListener('mousedown', e => {isDragging = true; previousMouseX = e.clientX;});
            renderer.domElement.addEventListener('mousemove', e => {
                if (isDragging) {
                    const deltaX = e.clientX - previousMouseX;
                    cameraRotationY += deltaX * 0.005;
                    camera.position.x = Math.sin(cameraRotationY) * 5;
                    camera.position.z = Math.cos(cameraRotationY) * 5;
                    camera.lookAt(0, 1.6, 0);
                    previousMouseX = e.clientX;
                }
            });
            renderer.domElement.addEventListener('mouseup', () => {isDragging = false;});
            function animate() {requestAnimationFrame(animate); renderer.render(scene, camera);}
            animate();
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
            console.log('âœ… Three.js ì´ˆê¸°í™” ì™„ë£Œ');
        }
    </script>
</body>
</html>
