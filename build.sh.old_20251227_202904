#!/bin/bash

GREEN='\033[0;32m'
BLUE='\033[0;34m'
NC='\033[0m'

echo -e "${BLUE}ğŸš€ ëª½ê³¨ ê°¤ëŸ¬ë¦¬ ë°°í¬ ì‹œì‘...${NC}"

# 1. ë°°í¬ í´ë” ì™„ì „ ì´ˆê¸°í™”
echo -e "${GREEN}1ë‹¨ê³„: ë°°í¬ í´ë” ì´ˆê¸°í™” (ë¹ˆë°© ë§Œë“¤ê¸°)...${NC}"
sudo rm -rf /var/www/monggol/*
sudo mkdir -p /var/www/monggol/{js,audio,images,css,data}

# 2. ë£¨íŠ¸ í´ë”ì—ì„œ í•„ìˆ˜ íŒŒì¼ë§Œ ë³µì‚¬
echo -e "${GREEN}2ë‹¨ê³„: í•„ìˆ˜ íŒŒì¼ ë³µì‚¬ (í´ë¦° ë°°í¬)...${NC}"

# index.html
sudo cp /home/ucon/monggol/index.html /var/www/monggol/

# js (main_v16.js + three.min.js)
sudo cp /home/ucon/monggol/js/main_v16.js /var/www/monggol/js/
sudo cp /home/ucon/monggol/js/three.min.js /var/www/monggol/js/

# audio (ëª¨ë“  ìŒì„± íŒŒì¼)
sudo cp /home/ucon/monggol/audio/*.mp3 /var/www/monggol/audio/
sudo cp /home/ucon/monggol/audio/*.m4a /var/www/monggol/audio/ 2>/dev/null || true

# images (ì‘í’ˆ + í”„ë¡œí•„ + ë°°ê²½ + UI)
sudo cp -r /home/ucon/monggol/images/* /var/www/monggol/images/

# css (ìˆìœ¼ë©´)
[ -d "/home/ucon/monggol/css" ] && sudo cp /home/ucon/monggol/css/*.css /var/www/monggol/css/ 2>/dev/null || true

# data (ìˆìœ¼ë©´)
[ -d "/home/ucon/monggol/data" ] && sudo cp /home/ucon/monggol/data/*.json /var/www/monggol/data/ 2>/dev/null || true

# 3. Docker ì»¨í…Œì´ë„ˆ ì™„ì „ ë™ê¸°í™”
echo -e "${GREEN}3ë‹¨ê³„: Docker ì»¨í…Œì´ë„ˆ ë™ê¸°í™”...${NC}"
sudo docker cp /var/www/monggol/. mongolia-gallery:/usr/share/nginx/html/
sudo docker exec mongolia-gallery nginx -s reload

# 4. ë°°í¬ ê²°ê³¼ í™•ì¸
echo -e "${GREEN}âœ… ë°°í¬ ì™„ë£Œ!${NC}"
echo -e "${BLUE}ğŸ“ ë°°í¬ëœ íŒŒì¼:${NC}"
echo ""
echo "ğŸ“„ HTML:"
ls -lh /var/www/monggol/*.html
echo ""
echo "ğŸ“œ JavaScript:"
ls -lh /var/www/monggol/js/
echo ""
echo "ğŸ”Š Audio:"
ls -lh /var/www/monggol/audio/ | grep -E "docent|intro"
echo ""
echo "ğŸ–¼ï¸ Images:"
ls -lh /var/www/monggol/images/ | grep -E "author_profile|guide"
echo ""
echo -e "${BLUE}ğŸ¯ í…ŒìŠ¤íŠ¸: http://172.30.1.150${NC}"
